<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ตรวจจับจากภาพถ่าย</title>
    <link rel="shortcut icon" type="image/x-icon" href="../images/rtp.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"/>
    
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert-dev.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.css">
    
    <link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Mitr:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="container-fluid p-3">
    <div class="container-fluid">
        <div class="row mb-3">
            <div class="col-12 alert alert-primary">
                 <p class="h4 text-center">ระบบตรวจจับผู้ขับขี่รถจักรยานยนต์ ที่สวมหมวกนิรภัย และไม่สวมหมวกนิรภัย ด้วยการใช้ภาพถ่าย</p>
                 <p class="h3 text-center">HelmetCop AI</p>
            </div>
        </div>        
        <div class="row mb-3">
            <div class="col-12 alert alert-primary">
                <p class="h4 text-center">การตรวจจับวัตถุในภาพ<p>
                <p class="h5 text-left">
                    &nbsp;&nbsp;&nbsp;&nbsp;โดยใช้ YOLO อัลกอริทึ่ม ในการตรวจจับวัตถุ (Object Detection) หลักการทำงานคร่าวๆ ของ YOLO คือการแบ่งภาพออกเป็นช่องๆขนาด N*N และจะใช้อัลกอริทั่ม คำนวนค่าความเป็นไปได้ของข่องนั้นๆ ว่าจะเป็นวัตถุที่อยู่ใน Dataset หรือไม่<br>
                </p>
                <p class="h5 text-left">
                    &nbsp;&nbsp;&nbsp;&nbsp;การตรวจจับวัตถุ หรือ Object Detection คือความสามารถในการตรวจจับวัตถุ และบ่งบอกว่าวัตถุนั้นคืออะไรได้อย่างถูกต้อง โดยเป็นหนึ่งในหน้าที่การทำงานของเทคโนโลยี Computer Vision ที่จะทำการฝึกฝนระบบ AI คอมพิวเตอร์ ให้สามารถมองเห็น และเข้าใจในสิ่งที่มนุษย์สามารถทำได้ผ่านการรับค่ารูปภาพ วิดิโอต่างๆ โดยเป็น Object Detection นั้นเป็น Machine learning แบบ Deep Learning เนื่องจากเป็นการสอนและฝึกฝน AI ให้ทำหน้าที่ได้เหมือนมนุษย์ ในครั้งนี้ ได้แบ่งคลาส ออกเป็น 5 คลาส ประกอบด้วย<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;1. คน (Human)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;2. คนที่อยู่บนรถจักรยานยนต์ (Human On Motorcycle)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;3. รถจักรยานยนต์ (Motorcycle)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;4. สวมหมวก (Helmet)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;5. ไม่สวมหมวก (No Helmet)
                </p>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-12 alert alert-primary">
                <form id="upload-form" action="/object_detect1/" method="post" enctype="multipart/form-data">
                    <div class="row mb-3">
                    <div class="col-12">
                        <center>
                        <label for="image">เลือกภาพถ่าย:</label>
                        <input type="file" id="image" name="image" accept="image/*" required>
                        </center>
                    </div>
                    </div>
                    <div class="row mb-3">
                    <div class="col-12">
                        <center>
                        <input type="submit" value=" อัพโหลดและตรวจจับ ">
                        </center>
                    </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-12 alert alert-primary">
                <p class="h3 text-center">ผลการตรวจจับจากภาพ:</p>
                <center>
                <img id="output-image" src="" alt="ภาพที่ผ่านการประมวลผลได้">
                </center>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-12 alert alert-primary">
                <center>
                <a id="download-link" href="" download="output.png"> ดาวน์โหลดภาพ </a>&nbsp;&nbsp;
                <a id="download-link" href="video" > หน้า Video </a>
                </center>
            </div>
        </div>
    </div>
</div>
    <script>
        document.getElementById('upload-form').onsubmit = async function(event) {
            event.preventDefault();

            const formData = new FormData(event.target);
            const response = await fetch('/object_detect1/', {
                method: 'POST',
                body: formData
            });

            if (response.ok) {
                const blob = await response.blob();
                const url = URL.createObjectURL(blob);

                const outputImage = document.getElementById('output-image');
                outputImage.src = url;

                const downloadLink = document.getElementById('download-link');
                downloadLink.href = url;
            } else {
                console.error('Failed to process image');
            }
        };
    </script>
    <!-- End Example Code -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>